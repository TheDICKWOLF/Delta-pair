<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Benz Technologies - Secure Session Pairing System">
  <title>BENZ PAIR | Secure Session Management</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="shortcut icon" href="https://files.catbox.moe/39z8jd.jpg" type="image/x-icon">
  <style>
    :root {
      --navy-primary: #0a1428;
      --navy-secondary: #0f1c38;
      --navy-tertiary: #14264a;
      --accent-blue: #5ce1e6;
      --accent-purple: #8a2be2;
      --accent-purple-hover: #a860f1;
      --text-primary: #e6f0ff;
      --text-secondary: #a3b3cc;
      --card-bg: rgba(20, 35, 60, 0.7);
      --shadow-color: rgba(10, 25, 47, 0.8);
      --transition: all 0.35s cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: var(--navy-primary);
      background-image: 
        radial-gradient(circle at 10% 20%, rgba(92, 225, 230, 0.08) 0%, transparent 25%),
        radial-gradient(circle at 90% 80%, rgba(92, 225, 230, 0.08) 0%, transparent 25%);
      color: var(--text-primary);
      min-height: 100vh;
      padding: 20px;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
    }

    .container {
      max-width: 500px;
      width: 100%;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .header {
      text-align: center;
      width: 100%;
      margin-bottom: 30px;
    }

    .profile-img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--accent-blue);
      box-shadow: 0 0 0 4px rgba(92, 225, 230, 0.15);
      transition: var(--transition);
      background: linear-gradient(135deg, var(--navy-secondary), var(--navy-tertiary));
      padding: 4px;
    }

    .profile-img:hover {
      transform: scale(1.05);
      box-shadow: 0 0 0 4px rgba(92, 225, 230, 0.35);
    }

    .logo {
      font-size: 2.1rem;
      font-weight: 800;
      background: linear-gradient(90deg, var(--accent-blue), #88c9f0);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      letter-spacing: 1px;
      text-shadow: 0 2px 10px rgba(92, 225, 230, 0.1);
      margin-top: 20px;
    }

    .tagline {
      color: var(--text-secondary);
      font-size: 1.05rem;
      max-width: 400px;
      margin: 0 auto;
      line-height: 1.6;
      padding: 0 15px;
      margin-top: 10px;
    }

    .card {
      background: var(--navy-secondary);
      border-radius: 16px;
      padding: 28px;
      width: 100%;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
      border: 1px solid rgba(92, 225, 230, 0.08);
      backdrop-filter: blur(10px);
      transition: var(--transition);
    }

    .card:hover {
      transform: translateY(-3px);
      box-shadow: 0 14px 35px rgba(0, 0, 0, 0.3);
      border-color: rgba(92, 225, 230, 0.15);
    }

    .card-title {
      display: flex;
      align-items: center;
      gap: 12px;
      color: var(--accent-blue);
      font-size: 1.5rem;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid rgba(92, 225, 230, 0.15);
    }

    .card-subtitle {
      color: var(--text-secondary);
      font-size: 1.05rem;
      margin-bottom: 25px;
      line-height: 1.6;
    }

    .input-group {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .input-container {
      position: relative;
    }

    .input-container input {
      width: 100%;
      padding: 16px 20px;
      border-radius: 12px;
      border: 1px solid rgba(92, 225, 230, 0.2);
      background: var(--navy-tertiary);
      color: var(--text-primary);
      font-size: 1.05rem;
      transition: var(--transition);
    }

    .input-container input:focus {
      outline: none;
      border-color: var(--accent-blue);
      box-shadow: 0 0 0 3px rgba(92, 225, 230, 0.2);
    }

    .input-container input::placeholder {
      color: var(--text-secondary);
      opacity: 0.8;
    }

    .submit-button {
      width: 100%;
      padding: 16px;
      border-radius: 12px;
      border: none;
      background: linear-gradient(135deg, var(--accent-purple), var(--accent-purple-hover));
      color: white;
      font-weight: 600;
      font-size: 1.05rem;
      letter-spacing: 0.5px;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .submit-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 7px 18px rgba(138, 43, 226, 0.35);
    }

    .submit-button:active {
      transform: translateY(0);
    }

    .waiting-message {
      display: none;
      text-align: center;
      color: var(--accent-blue);
      font-weight: 500;
      margin: 15px 0;
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0% { opacity: 0.6; }
      50% { opacity: 1; }
      100% { opacity: 0.6; }
    }

    .pairing-result {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid rgba(92, 225, 230, 0.15);
    }

    .code-container {
      background: var(--navy-tertiary);
      border-radius: 12px;
      padding: 18px;
      text-align: center;
      cursor: pointer;
      transition: var(--transition);
      border: 1px solid rgba(92, 225, 230, 0.1);
    }

    .code-container:hover {
      border-color: var(--accent-blue);
      background: rgba(20, 38, 74, 0.7);
    }

    .code-label {
      color: var(--text-secondary);
      font-size: 0.9rem;
      margin-bottom: 8px;
    }

    .code-value {
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--accent-blue);
      letter-spacing: 1px;
      word-break: break-all;
    }

    .copied-message {
      color: #5ce1e6;
      font-weight: 600;
      animation: fadeInOut 0.5s ease;
    }

    @keyframes fadeInOut {
      0% { opacity: 0; transform: translateY(-5px); }
      50% { opacity: 1; }
      100% { opacity: 0; transform: translateY(5px); }
    }

    .powered-by {
      margin-top: 30px;
      text-align: center;
      color: var(--text-secondary);
      font-size: 0.9rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    .powered-by-logo {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(92, 225, 230, 0.1);
      color: var(--accent-blue);
      padding: 4px 12px;
      border-radius: 20px;
      font-weight: 600;
    }

    @media (max-width: 480px) {
      .card {
        padding: 25px 20px;
      }
      
      .logo {
        font-size: 1.8rem;
      }
      
      .card-title {
        font-size: 1.4rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <img src="https://i.ibb.co/Wpc316Yk/jpg.jpg" alt="Benz Technologies Logo" class="profile-img">
      <h1 class="logo">BENZ-XMD-V1 PAIR</h1>
      <p class="tagline">Secure session pairing with military-grade encryption protocols</p>
    </div>
    
    <div class="card">
      <h2 class="card-title"><i class="fas fa-link"></i> Secure Pairing System</h2>
      <p class="card-subtitle">Enter your WhatsApp number with country code to generate a secure pairing code</p>
      
      <div class="input-group">
        <div class="input-container">
          <input 
            type="tel" 
            id="number" 
            placeholder="Enter your phone number with country code (e.g. 2637147XXXX)" 
            autocomplete="tel"
          >
        </div>
        
        <button id="submit" class="submit-button">
          <i class="fas fa-paper-plane"></i> Generate Pairing Code
        </button>
        
        <div id="waiting-message" class="waiting-message">
          <i class="fas fa-spinner fa-spin"></i> Processing your request...
        </div>
      </div>
      
      <div class="pairing-result" id="pair">
        <!-- Code will be displayed here -->
      </div>
    </div>
    
    <div class="powered-by">
      <div class="powered-by-logo">
        <i class="fas fa-shield-alt"></i> POWERED BY BENZ TECHNOLOGIES
      </div>
      <span>Enterprise-grade session management solutions</span>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      let resultElement = document.getElementById("pair");
      let submitButton = document.getElementById("submit");
      let numberInput = document.getElementById("number");
      let waitingMessage = document.getElementById("waiting-message");

      async function copyCode() {
        const codeElement = document.getElementById("code-value");
        const originalText = codeElement.textContent;
        
        try {
          await navigator.clipboard.writeText(originalText);
          
          // Show "COPIED" effect
          codeElement.textContent = "COPIED!";
          codeElement.classList.add("copied-message");
          
          // Reset after animation
          setTimeout(() => {
            codeElement.textContent = originalText;
            codeElement.classList.remove("copied-message");
          }, 1500);
        } catch (err) {
          console.error('Failed to copy: ', err);
        }
      }

      submitButton.addEventListener("click", async (e) => {
        e.preventDefault();
        
        // Clear previous results
        resultElement.innerHTML = '';
        
        if (!numberInput.value) {
          resultElement.innerHTML = `
            <div class="alert">
              <i class="fas fa-exclamation-circle" style="color: #ff6b6b; margin-right: 8px;"></i>
              <span style="color: #ff6b6b;">Please enter your WhatsApp number with country code</span>
            </div>
          `;
          return;
        }
        
        // Clean and validate phone number
        const cleanedNumber = numberInput.value.replace(/[^0-9]/g, "");
        if (cleanedNumber.length < 10) {
          resultElement.innerHTML = `
            <div class="alert">
              <i class="fas fa-exclamation-circle" style="color: #ff6b6b; margin-right: 8px;"></i>
              <span style="color: #ff6b6b;">Invalid number format - too short</span>
            </div>
          `;
          return;
        }
        
        // Format the number for display
        let formattedNumber = "+" + cleanedNumber;
        if (cleanedNumber.length > 10) {
          formattedNumber = "+" + cleanedNumber.substring(0, 3) + " " + 
                           cleanedNumber.substring(3, 6) + " " + 
                           cleanedNumber.substring(6);
        }
        numberInput.value = formattedNumber;
        
        // Show waiting message
        waitingMessage.style.display = "block";
        
        try {
          const { data } = await axios(`/code?number=${cleanedNumber}`);
          const code = data.code || "Service Unavailable";
          
          // Hide waiting message
          waitingMessage.style.display = "none";
          
          // Display the code with copy functionality
          resultElement.innerHTML = `
            <div class="pairing-result">
              <div class="code-container" id="copy-container" onclick="copyCode()">
                <div class="code-label">YOUR SECURE PAIRING CODE</div>
                <div class="code-value" id="code-value">${code}</div>
                <div class="code-instructions" style="font-size: 0.85rem; margin-top: 5px; color: var(--text-secondary);">Tap to copy</div>
              </div>
            </div>
          `;
        } catch (error) {
          waitingMessage.style.display = "none";
          resultElement.innerHTML = `
            <div class="alert">
              <i class="fas fa-exclamation-triangle" style="color: #ff6b6b; margin-right: 8px;"></i>
              <span style="color: #ff6b6b;">Service unavailable. Please try again later.</span>
            </div>
          `;
          console.error("API Error:", error);
        }
      });
      
      // Make copyCode function available globally
      window.copyCode = copyCode;
    });
  </script>
</body>
</html>